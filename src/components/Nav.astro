<nav id="nav" class="nav-container">
  <!-- Toggle Button -->
  <button
    id="menu-toggle"
    class="menu-toggle-button"
    aria-label="Toggle Menu"
    aria-expanded="false"
  >
    <h3>Menu</h3>
  </button>

  <!-- Menu Items -->
  <ul id="menu" class="menu-list md:block" tabindex="-1">
    <li class="menu-toggle-button">
      <button id="menu-close" aria-label="Close Menu"> <h3>Close</h3></button>
    </li>
    <li class="pill">
      <a class="pill-link" href="#course-description">Course Description</a>
    </li>
    <li class="pill">
      <a class="pill-link" href="#module-1:-from-fixed-to-variable"
        >Course Modules</a
      >
    </li>
    <li class="pill">
      <a class="pill-link" href="#grading-and-attendance">Grading</a>
    </li>
    <li class="pill">
      <a class="pill-link" href="#open-source-policies">Policies</a>
    </li>
    <li class="pill">
      <a
        class="pill-link"
        href="#pratt-communications-design-departmental-resources">Resources</a
      >
    </li>
  </ul>
</nav>

<script>
  const toggleBtn = document.getElementById("menu-toggle");
  const menu = document.getElementById("menu");
  const closeBtn = document.getElementById("menu-close");
  const pills = document.querySelectorAll(".pill-link");

  function openMenu() {
    menu.classList.add("open");
    toggleBtn.setAttribute("aria-expanded", "true");
  }

  function closeMenu() {
    menu.classList.remove("open");
    toggleBtn.setAttribute("aria-expanded", "false");
  }

  toggleBtn.addEventListener("click", () => {
    if (menu.classList.contains("open")) {
      closeMenu();
    } else {
      openMenu();
    }
  });

  closeBtn.addEventListener("click", closeMenu);

  // Close when clicking outside
  document.addEventListener("click", (e) => {
    if (
      !menu.contains(e.target) &&
      !toggleBtn.contains(e.target) &&
      menu.classList.contains("open")
    ) {
      closeMenu();
    }
  });

  // âœ… Close menu on pill click (and let anchor scroll still happen)
  pills.forEach((pill) => {
    pill.addEventListener("click", () => {
      closeMenu();
    });
  });

  let resizeTimeout;
  window.addEventListener("resize", () => {
    menu.classList.add("no-transition");

    // Close menu on resize
    closeMenu();

    clearTimeout(resizeTimeout);
    resizeTimeout = setTimeout(() => {
      menu.classList.remove("no-transition");
    }, 250);
  });
</script>
